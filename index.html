<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <title>Redis pool for Elixir lang by le0pard</title>

    <link rel="stylesheet" href="stylesheets/styles.css">
    <link rel="stylesheet" href="stylesheets/pygment_trac.css">
    <script src="javascripts/scale.fix.js"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="wrapper">
      <header>
        <h1>Redis pool for Elixir lang</h1>
        <p>Build on top of eredis and poolboy</p>
        <p class="view"><a href="https://github.com/le0pard/redis_pool">View the Project on GitHub <small>le0pard/redis_pool</small></a></p>
        <ul>
          <li><a href="https://github.com/le0pard/redis_pool/zipball/master">Download <strong>ZIP File</strong></a></li>
          <li><a href="https://github.com/le0pard/redis_pool/tarball/master">Download <strong>TAR Ball</strong></a></li>
          <li><a href="https://github.com/le0pard/redis_pool">View On <strong>GitHub</strong></a></li>
        </ul>
      </header>
      <section>
        <h1>
<a id="redispool-for-elixir" class="anchor" href="#redispool-for-elixir" aria-hidden="true"><span class="octicon octicon-link"></span></a>RedisPool for Elixir</h1>

<p><a href="https://travis-ci.org/le0pard/redis_pool"><img src="https://travis-ci.org/le0pard/redis_pool.png?branch=master" alt="Build Status"></a></p>

<p>This is redis pool for <a href="http://elixir-lang.org/">Elixir</a>. Build on top of <a href="https://github.com/wooga/eredis">eredis</a> and <a href="https://github.com/devinus/poolboy">poolboy</a>.</p>

<h2>
<a id="examples" class="anchor" href="#examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Examples</h2>

<p>Application start:</p>

<pre><code>RedisPool.start
</code></pre>

<p>or add it in <code>application</code> section in mix:</p>

<pre><code>def application do
  [mod: {Example, []},
   applications: [ :redis_pool ] ]
end
</code></pre>

<h3>
<a id="create-pools" class="anchor" href="#create-pools" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create pools</h3>

<pre><code>RedisPool.create_pool(:default, 10)

RedisPool.create_pool(:test, 10, 'localhost', 6379)

RedisPool.create_pool(:test2, 10, 'localhost', 6379, 0, 'password', 100)
</code></pre>

<p>Also you can configure redis_pool directly from configuration file to get pools automatically created at application startup. In <code>config/config.exs</code>, add :</p>

<pre><code>config :redis_pool, :pools, [
  test_pool:   [size: 10, hostname: "127.0.0.1", port: 6379],
  test_pool_2: [size: 20, hostname: "127.0.0.1", port: 6379, database: "user_db", password: "abc", reconnect_sleep: "20"]
]
</code></pre>

<h3>
<a id="delete-pools" class="anchor" href="#delete-pools" aria-hidden="true"><span class="octicon octicon-link"></span></a>Delete pools</h3>

<pre><code>RedisPool.delete_pool(:default)

RedisPool.delete_pool(:test)
</code></pre>

<h3>
<a id="usage" class="anchor" href="#usage" aria-hidden="true"><span class="octicon octicon-link"></span></a>Usage</h3>

<p>Usage of pools:</p>

<pre><code>RedisPool.q({:global, :default}, ["SET", "foo", "bar"])

RedisPool.q({:global, :test}, ["GET", "foo"])
</code></pre>

<p>Method <code>transaction</code> is execute all redis command between <code>MULTI</code> and <code>EXEC</code> commands:</p>

<pre><code>RedisPool.transaction {:global, :redis}, fn(redis) -&gt;
  :eredis.q redis, ["SADD", "queues", queue]
  :eredis.q redis, ["LPUSH", "queue", "Test" ]
end
</code></pre>

<h2>
<a id="contributing" class="anchor" href="#contributing" aria-hidden="true"><span class="octicon octicon-link"></span></a>Contributing</h2>

<ol>
<li>Fork it</li>
<li>Create your feature branch (<code>git checkout -b my-new-feature</code>)</li>
<li>Commit your changes (<code>git commit -am 'Add some feature'</code>)</li>
<li>Push to the branch (<code>git push origin my-new-feature</code>)</li>
<li>Create new Pull Request</li>
</ol>
      </section>
    </div>
    <footer>
      <p>Project maintained by <a href="https://github.com/le0pard">le0pard</a></p>
      <p>Hosted on GitHub Pages &mdash; Theme by <a href="https://github.com/orderedlist">orderedlist</a></p>
    </footer>
    <!--[if !IE]><script>fixScale(document);</script><![endif]-->
    
  </body>
</html>